<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Law Cards</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f2f4f8;
}

/* ===== 画面構造 ===== */
.app{
  height:100vh;
  display:flex;
  flex-direction:column;
}

/* 上部（フィルタ） */
.header{
  padding:12px;
  display:flex;
  justify-content:center;
  gap:12px;
}

/* 中央（カード専用ゾーン） */
.main{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:12px;
}

/* 下部（操作） */
.footer{
  padding:16px 0 24px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}

/* ===== カード ===== */
.card-container{
  perspective:1000px;
}

.card{
  width:300px;
  height:180px;
  position:relative;
  transform-style:preserve-3d;
  transition:transform .6s;
}

.card.is-flipped{
  transform:rotateY(180deg);
}

.card-face{
  position:absolute;
  width:100%;
  height:100%;
  background:white;
  border-radius:18px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  font-size:17px;
  text-align:center;
  backface-visibility:hidden;
}

.card-back{
  transform:rotateY(180deg);
}

/* ===== 習熟度 ===== */
.level{
  font-size:14px;
  font-weight:600;
}
.perfect{color:#2ecc71;}
.retry{color:#f1c40f;}
.bad{color:#e74c3c;}
.unlearned{color:#7f8c8d;}

/* ===== ボタン ===== */
.buttons{
  display:flex;
  gap:12px;
}
button{
  padding:10px 16px;
  border:none;
  border-radius:20px;
  font-size:14px;
}
.bad-btn{background:#e74c3c;color:white;}
.retry-btn{background:#f1c40f;}
.perfect-btn{background:#2ecc71;color:white;}

.nav{
  display:flex;
  gap:16px;
}
.nav button{
  background:#e0e0e0;
}
</style>
</head>

<body>

<div class="app">

  <!-- 上部 -->
  <div class="header">
    <select>
      <option>全科目</option>
    </select>
    <select>
      <option>全習熟度</option>
    </select>
  </div>

  <!-- 中央 -->
  <div class="main">
    <div class="card-container">
      <div class="card" id="card">
        <div class="card-face" id="front"></div>
        <div class="card-face card-back" id="back"></div>
      </div>
    </div>
    <div class="level" id="level"></div>
  </div>

  <!-- 下部 -->
  <div class="footer">
    <div class="buttons">
      <button class="bad-btn" id="bad">全然ダメ</button>
      <button class="retry-btn" id="retry">もう1回</button>
      <button class="perfect-btn" id="perfect">完璧</button>
    </div>

    <div class="nav">
      <button id="prev">←</button>
      <button id="next">→</button>
    </div>

    <input type="file">
  </div>

</div>

<script>
const cards=[
  {f:"憲法とは何か",b:"国家権力を制限する法",l:"未学習"},
  {f:"刑法の目的",b:"犯罪と刑罰を定める",l:"未学習"}
];

let i=0;
const card=document.getElementById("card");
const front=document.getElementById("front");
const back=document.getElementById("back");
const level=document.getElementById("level");

function render(){
  const c=cards[i];
  front.textContent=c.f;
  back.textContent=c.b;
  level.textContent="習熟度："+c.l;
  level.className="level "+(
    c.l==="完璧"?"perfect":
    c.l==="もう1回"?"retry":
    c.l==="全然ダメ"?"bad":"unlearned"
  );
}
render();

card.onclick=()=>card.classList.toggle("is-flipped");

document.getElementById("perfect").onclick=()=>{cards[i].l="完璧";render();}
document.getElementById("retry").onclick=()=>{cards[i].l="もう1回";render();}
document.getElementById("bad").onclick=()=>{cards[i].l="全然ダメ";render();}

let sx=0;
card.addEventListener("touchstart",e=>sx=e.touches[0].clientX);
card.addEventListener("touchend",e=>{
  const d=e.changedTouches[0].clientX-sx;
  if(Math.abs(d)<40)return;
  card.classList.remove("is-flipped");
  if(d<0&&i<cards.length-1)i++;
  if(d>0&&i>0)i--;
  render();
});
</script>

</body>
</html>
